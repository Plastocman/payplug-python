[tox]
; No support for Python 3.4+ in requests 1.x
envlist =
    py{27,py,py3}-requests{221,222,dev},
    py{35,36,37}-requests{221,222,dev}

[testenv]
deps =
    pip>9.0.1
    pytest>=2.7.0
    pytest-cov>=2.2
;    Uncomment this if you want to test with a six version lower than 1.7.0 since mock depends on six.wraps which was
;    released a bit later.
;     mock==1.0.1
    mock>=1.0.1
    six>=1.4.0
    requests221: requests>=2.20,<2.21
    requests222: requests>=2.21,<2.22
    requestsdev: https://github.com/kennethreitz/requests/tarball/master
    ; Travis CI runs on Debian Jessie which provides outdated Pypy versions (<2.6) that are incompatible with
    ; cryptography >= 1.0.
    ; We have to force cryptography < 1.0 in this case.
    ; We also force pyOpenSSL < 16.0 because newer versions requires cryptography>=1.3.
    ; See https://github.com/travis-ci/travis-ci/issues/4756
    py{py,py3}-travis: pyOpenSSL<16.0
    py{py,py3}-travis: cryptography<1.0
commands=py.test {posargs}